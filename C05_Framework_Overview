##一个错误的示范案例

以下是一个常见的量化交易策略
1. 进场规则：当20日移动平均线高于40日移动平均线时买入，反之，当20日移动平均线低于40日移动平均线时，卖出。
2. 出场规则：当两根移动平均线交叉时，平掉原来的仓位并且反向开仓。
3. 头寸管理：交易手数不超过10手欧洲美元期货，1手FTSE合约。
4. 资金管理：每次交易所占用资金不超过总权益的3%。
5. 止损规则：当损失总额超过（建仓以来最高）权益总量的3%，则止损。如果发现止损过于频繁，则提高止损的幅度。

暂时不考虑进出场规则。策略中的头寸管理、资金管理和止损规则是有很大问题的。
首先，为什么3%？3%能产生足够的风险吗？如果我是一个较为保守的投资者，我还可以使用3%吗？如果我不喜欢某一笔特定的交易（信号），我该交易多少？
我常常交易40个左右的品种，这是否意味着我要我需要暴露的风险是总权益的120%？如果我的交易频率低、周期长，3%是否还合理？
其次，头寸管理方面，如果权益水平只有5万英镑，那这样的头寸可能是合理的。但是如果我的资金量不是5万呢？策略开发时，该头寸可能合理，但是现在是否还合理？
最后，仅仅基于总权益水平以及投资者的风险忍耐力来设定止损水平，这是不正确的。散户和机构投资者不一样，品种不一样，市场波动程度不一样。

解决的方法，在于把交易系统分为独立的几个部分：交易规则（trading rule，包括明显的或者内含的止损规则），头寸管理（position sizing），
波动率目标（volatility target，用来冒险的平均资金量）。各个部分的设计都要独立完成。

交易规则和止损规则应该只基于期望的市场价格波动来设计，而不应该考虑你的资金帐户的大小。
波动率目标，即将多少资金量用来冒险，这是你的资金量大小和你的风险容忍态度的函数。
然后，头寸的设定，应该基于市场的波动程度、你对市场价格预测的置信程度、以及你希望投入多少的资金量这三者来共同确定。

##交易系统应该模块化（modular）
交易系统中，交易规则（trading rules）给出了对标的的预测，这是交易系统的核心，类似于汽车的引擎。
一个汽车可以换不同的引擎，这是因为引擎是一个标准模块。交易规则也要具有这样的特性。

为了模块化，每个模块之间需要都需要有定义良好的接口（well-defined interface）。
